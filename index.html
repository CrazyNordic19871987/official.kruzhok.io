<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>–ö—Ä—É–∂–û–ö - –û—Ç–∑—ã–≤—ã –∏ —Ä–µ–π—Ç–∏–Ω–≥–∏ –¥–µ—Ç—Å–∫–∏—Ö –∫—Ä—É–∂–∫–æ–≤ –ú–æ—Å–∫–≤—ã</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üë®‚Äçüéì</text></svg>">
    
    <style>
        /* TripAdvisor-inspired styles */
        :root {
            --green-primary: #34E0A1;
            --green-dark: #00A870;
            --green-light: #E8F8F1;
            --gray-dark: #2D2D2D;
            --gray-medium: #585858;
            --gray-light: #F5F5F5;
            --white: #FFFFFF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: var(--white);
            color: var(--gray-dark);
            line-height: 1.4;
        }
        
        /* Header - TripAdvisor style */
        .header {
            background: var(--white);
            border-bottom: 1px solid #e0e0e0;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--green-dark);
            text-decoration: none;
        }
        
        .logo span {
            color: var(--gray-dark);
        }
        
        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--green-light) 0%, #ffffff 100%);
            padding: 3rem 1rem;
            text-align: center;
        }
        
        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--gray-dark);
        }
        
        .hero p {
            font-size: 1.2rem;
            color: var(--gray-medium);
            margin-bottom: 2rem;
        }
        
        /* Search Bar - TripAdvisor style */
        .search-container {
            max-width: 800px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .search-bar {
            display: grid;
            grid-template-columns: 2fr 1fr 1fr auto;
            gap: 1rem;
            align-items: end;
        }
        
        .search-input {
            position: relative;
        }
        
        .search-input input {
            width: 100%;
            padding: 1rem 1rem 1rem 3rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }
        
        .search-input input:focus {
            outline: none;
            border-color: var(--green-primary);
        }
        
        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-medium);
        }
        
        .filter-select {
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            background: var(--white);
        }
        
        .search-btn {
            background: var(--green-primary);
            color: var(--white);
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .search-btn:hover {
            background: var(--green-dark);
        }
        
        /* Main Content */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem 1rem;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 2rem;
        }
        
        /* Results Section */
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        
        .results-count {
            font-size: 1.2rem;
            color: var(--gray-medium);
        }
        
        .sort-select {
            padding: 0.5rem;
            border: 1px solid #e0e0e0;
            border-radius: 4px;
        }
        
        /* Place Cards - TripAdvisor style */
        .place-card {
            background: var(--white);
            border-radius: 12px;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: transform 0.3s, box-shadow 0.3s;
            overflow: hidden;
        }
        
        .place-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.12);
        }
        
        .place-card-content {
            display: grid;
            grid-template-columns: 200px 1fr auto;
            gap: 1.5rem;
            padding: 1.5rem;
        }
        
        .place-image {
            width: 200px;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .place-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .place-info {
            flex: 1;
        }
        
        .place-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            color: var(--gray-dark);
        }
        
        /* Rating Stars - TripAdvisor style */
        .rating {
            display: flex;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .stars {
            color: var(--green-primary);
            font-size: 1.2rem;
            margin-right: 0.5rem;
        }
        
        .rating-score {
            background: var(--green-dark);
            color: var(--white);
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-size: 0.9rem;
            font-weight: bold;
        }
        
        .reviews-count {
            color: var(--gray-medium);
            font-size: 0.9rem;
            margin-left: 0.5rem;
        }
        
        .place-meta {
            color: var(--gray-medium);
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        
        .place-features {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .feature-tag {
            background: var(--green-light);
            color: var(--green-dark);
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .place-actions {
            display: flex;
            gap: 1rem;
        }
        
        .btn-primary {
            background: var(--green-primary);
            color: var(--white);
            padding: 0.7rem 1.5rem;
            border: none;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .btn-primary:hover {
            background: var(--green-dark);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--green-dark);
            padding: 0.7rem 1.5rem;
            border: 2px solid var(--green-primary);
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-secondary:hover {
            background: var(--green-light);
        }
        
        .place-price {
            text-align: right;
            min-width: 120px;
        }
        
        .price-from {
            color: var(--gray-medium);
            font-size: 0.9rem;
            margin-bottom: 0.3rem;
        }
        
        .price-amount {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--green-dark);
        }
        
        .price-period {
            color: var(--gray-medium);
            font-size: 0.9rem;
        }
        
        /* Map Sidebar */
        .map-sidebar {
            position: sticky;
            top: 2rem;
            height: fit-content;
        }
        
        #map {
            width: 100%;
            height: 400px;
            border-radius: 12px;
            margin-bottom: 1rem;
        }
        
        .map-legend {
            background: var(--gray-light);
            padding: 1rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }
        
        /* Responsive */
        @media (max-width: 968px) {
            .container {
                grid-template-columns: 1fr;
            }
            
            .place-card-content {
                grid-template-columns: 150px 1fr;
            }
            
            .place-price {
                grid-column: 1 / -1;
                text-align: left;
                margin-top: 1rem;
            }
        }
        
        @media (max-width: 768px) {
            .search-bar {
                grid-template-columns: 1fr;
            }
            
            .place-card-content {
                grid-template-columns: 1fr;
                text-align: center;
            }
            
            .place-image {
                width: 100%;
                height: 200px;
            }
        }
    </style>
    
    <script src="https://api-maps.yandex.ru/2.1/?apikey=73a4825a-3afa-47c2-9241-df3665eaa73f&lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="#" class="logo">–ö—Ä—É–∂<span>–û–ö</span></a>
            <nav>
                <button class="btn-secondary">–î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤</button>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <h1>–ù–∞–π–¥–∏—Ç–µ –ª—É—á—à–∏–µ –∫—Ä—É–∂–∫–∏ –¥–ª—è –≤–∞—à–µ–≥–æ —Ä–µ–±–µ–Ω–∫–∞</h1>
        <p>–ß–µ—Å—Ç–Ω—ã–µ –æ—Ç–∑—ã–≤—ã, —Ä–µ–π—Ç–∏–Ω–≥–∏ –∏ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –æ–¥–∏–Ω –∫–ª–∏–∫</p>
        
        <div class="search-container">
            <div class="search-bar">
                <div class="search-input">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" placeholder="–ö—Ä—É–∂–∫–∏, —Å–µ–∫—Ü–∏–∏, –∑–∞–Ω—è—Ç–∏—è...">
                </div>
                
                <select class="filter-select" id="categoryFilter">
                    <option value="">–í—Å–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è</option>
                    <option value="–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ">–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ</option>
                    <option value="–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ">–¢–≤–æ—Ä—á–µ—Å–∫–æ–µ</option>
                    <option value="–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ">–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ</option>
                    <option value="–ù–∞—É—á–Ω–æ–µ">–ù–∞—É—á–Ω–æ–µ</option>
                    <option value="–Ø–∑—ã–∫–æ–≤–æ–µ">–Ø–∑—ã–∫–æ–≤–æ–µ</option>
                </select>
                
                <select class="filter-select" id="ageFilter">
                    <option value="">–õ—é–±–æ–π –≤–æ–∑—Ä–∞—Å—Ç</option>
                    <option value="3-5">3-5 –ª–µ—Ç</option>
                    <option value="6-8">6-8 –ª–µ—Ç</option>
                    <option value="9-12">9-12 –ª–µ—Ç</option>
                    <option value="13-17">13-17 –ª–µ—Ç</option>
                </select>
                
                <button class="search-btn" onclick="performSearch()">–ù–∞–π—Ç–∏</button>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div class="container">
        <!-- Results Column -->
        <main class="results-column">
            <div class="results-header">
                <div class="results-count">–ù–∞–π–¥–µ–Ω–æ –∫—Ä—É–∂–∫–æ–≤: <span id="resultsCount">0</span></div>
                <select class="sort-select" id="sortSelect" onchange="performSearch()">
                    <option value="rating">–ü–æ —Ä–µ–π—Ç–∏–Ω–≥—É</option>
                    <option value="name">–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é</option>
                    <option value="price">–ü–æ —Ü–µ–Ω–µ</option>
                </select>
            </div>
            
            <div id="resultsList" class="results-list">
                <!-- Results will be loaded here -->
            </div>
        </main>
        
        <!-- Map Sidebar -->
        <aside class="map-sidebar">
            <div id="map"></div>
            <div class="map-legend">
                <strong>–ö—Ä—É–∂–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ</strong>
                <p>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫—Ä—É–∂–∫–æ–≤ —Ä—è–¥–æ–º —Å –≤–∞–º–∏</p>
            </div>
        </aside>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
        const AIRTABLE_API_KEY = 'patZudd3eZOcrhroz.b1307f7e37e3d583ff1750c59cc8291bfe3e9a8d2c1531d89350c38cee5a44ad';
        const AIRTABLE_BASE_ID = 'app8oCy3oQts8aPk3';
        const AIRTABLE_TABLE_NAME = 'Circles';
        const TALLY_FORM_URL = 'https://tally.so/r/mVg4Ol';

        let map;
        let placemarks = [];
        let allCircles = [];

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
       async function loadCirclesFromAirtable() {
    const url = `https://api.airtable.com/v0/${AIRTABLE_BASE_ID}/${AIRTABLE_TABLE_NAME}`;
    
    try {
        const response = await fetch(url, {
            headers: {
                'Authorization': `Bearer ${AIRTABLE_API_KEY}`,
                'Content-Type': 'application/json'
            }
        });
        
        console.log('–°—Ç–∞—Ç—É—Å –æ—Ç–≤–µ—Ç–∞:', response.status);
        
        if (!response.ok) {
            throw new Error(`–û—à–∏–±–∫–∞ HTTP: ${response.status} - ${response.statusText}`);
        }
        
        const data = await response.json();
        console.log('–î–∞–Ω–Ω—ã–µ –æ—Ç Airtable:', data);
        
        if (!data.records || data.records.length === 0) {
            console.warn('–í Airtable –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π –∏–ª–∏ —Ç–∞–±–ª–∏—Ü–∞ –ø—É—Å—Ç–∞—è');
            return [];
        }
        
        return data.records.map(record => {
            const fields = record.fields || {};
            return {
                id: record.id,
                Name: fields.Name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è',
                Category: fields.Category || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                AgeMin: fields.AgeMin || 0,
                AgeMax: fields.AgeMax || 0,
                Address: fields.Address || '–ê–¥—Ä–µ—Å –Ω–µ —É–∫–∞–∑–∞–Ω',
                Lat: fields.Lat || null,
                Lon: fields.Lon || null,
                Description: fields.Description || '',
                Phone: fields.Phone || '',
                Image: fields.Image || [],
                IsActive: fields.IsActive !== false, // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é true
                
                // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ
                rating: (fields.rating || Math.random() * 2 + 3),
                reviews: (fields.reviews || Math.floor(Math.random() * 50) + 5),
                price: (fields.price || Math.floor(Math.random() * 5000) + 2000)
            };
        });
        
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Airtable:', error);
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–µ
        return getTestData();
    }
}

// –§—É–Ω–∫—Ü–∏—è —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
function getTestData() {
    return [
        {
            id: 'test1',
            Name: '–†–æ–±–æ—Ç–æ—Ç–µ—Ö–Ω–∏–∫–∞ –¥–ª—è –¥–µ—Ç–µ–π',
            Category: '–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ',
            AgeMin: 6,
            AgeMax: 12,
            Address: '–ú–æ—Å–∫–≤–∞, —É–ª. –¢–≤–µ—Ä—Å–∫–∞—è, 1',
            Lat: 55.760181,
            Lon: 37.617686,
            IsActive: true,
            rating: 4.5,
            reviews: 23,
            price: 4500
        },
        {
            id: 'test2', 
            Name: '–¢–∞–Ω—Ü–µ–≤–∞–ª—å–Ω–∞—è —Å—Ç—É–¥–∏—è "–ì—Ä–∞—Ü–∏—è"',
            Category: '–°–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ',
            AgeMin: 4,
            AgeMax: 16,
            Address: '–ú–æ—Å–∫–≤–∞, —É–ª. –ê—Ä–±–∞—Ç, 25',
            Lat: 55.749602,
            Lon: 37.590015,
            IsActive: true,
            rating: 4.8,
            reviews: 34,
            price: 3200
        }
    ];
}

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
        function initMap() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    position => createMap([position.coords.latitude, position.coords.longitude]),
                    error => createMap([55.7558, 37.6173])
                );
            } else {
                createMap([55.7558, 37.6173]);
            }
        }

        function createMap(center) {
            map = new ymaps.Map('map', { 
                center: center, 
                zoom: 11,
                controls: ['zoomControl', 'fullscreenControl']
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –Ω–∞ –∫–∞—Ä—Ç—É
        function addPlacemarks(circles) {
            placemarks.forEach(mark => map.geoObjects.remove(mark));
            placemarks = [];
            
            circles.forEach(circle => {
                if (circle.Lat && circle.Lon) {
                    const placemark = new ymaps.Placemark([circle.Lat, circle.Lon], {
                        balloonContent: `
                            <strong>${circle.Name}</strong><br>
                            –†–µ–π—Ç–∏–Ω–≥: ${circle.rating.toFixed(1)} ‚≠ê<br>
                            ${circle.Address}
                        `
                    }, {
                        preset: 'islands#greenIcon'
                    });
                    
                    placemarks.push(placemark);
                    map.geoObjects.add(placemark);
                }
            });
            
            if (placemarks.length > 0) {
                map.setBounds(map.geoObjects.getBounds());
            }
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–≤–µ–∑–¥ —Ä–µ–π—Ç–∏–Ω–≥–∞
        function generateStars(rating) {
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) stars += '‚òÖ';
            if (hasHalfStar) stars += '¬Ω';
            for (let i = stars.length; i < 5; i++) stars += '‚òÜ';
            
            return stars;
        }

        // –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
        function performSearch() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const category = document.getElementById('categoryFilter').value;
            const ageFilter = document.getElementById('ageFilter').value;
            const sortBy = document.getElementById('sortSelect').value;
            
            let filteredCircles = allCircles.filter(circle => {
                const matchesSearch = !searchText || 
                    circle.Name?.toLowerCase().includes(searchText) || 
                    circle.Description?.toLowerCase().includes(searchText);
                
                const matchesCategory = !category || circle.Category === category;
                const matchesAge = !ageFilter || (
                    circle.AgeMin >= parseInt(ageFilter.split('-')[0]) && 
                    circle.AgeMax <= parseInt(ageFilter.split('-')[1])
                );
                
                return matchesSearch && matchesCategory && matchesAge && circle.IsActive;
            });
            
            // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
            filteredCircles.sort((a, b) => {
                switch(sortBy) {
                    case 'rating': return b.rating - a.rating;
                    case 'price': return a.price - b.price;
                    case 'name': return a.Name.localeCompare(b.Name);
                    default: return 0;
                }
            });
            
            displayCircles(filteredCircles);
        }

        function displayCircles(circles) {
            document.getElementById('resultsCount').textContent = circles.length;
            addPlacemarks(circles);
            
            const resultsList = document.getElementById('resultsList');
            resultsList.innerHTML = '';
            
            circles.forEach(circle => {
                const card = document.createElement('div');
                card.className = 'place-card';
                
                card.innerHTML = `
                    <div class="place-card-content">
                        <div class="place-image">
                            ${circle.Image && circle.Image.length > 0 
                                ? `<img src="${circle.Image[0].url}" alt="${circle.Name}">`
                                : circle.Name || '–ö—Ä—É–∂–æ–∫'
                            }
                        </div>
                        
                        <div class="place-info">
                            <h3 class="place-title">${circle.Name || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è'}</h3>
                            
                            <div class="rating">
                                <span class="stars">${generateStars(circle.rating)}</span>
                                <span class="rating-score">${circle.rating.toFixed(1)}</span>
                                <span class="reviews-count">${circle.reviews} –æ—Ç–∑—ã–≤–æ–≤</span>
                            </div>
                            
                            <div class="place-meta">
                                <p><strong>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:</strong> ${circle.Category || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</p>
                                <p><strong>–í–æ–∑—Ä–∞—Å—Ç:</strong> ${circle.AgeMin || '?'}-${circle.AgeMax || '?'} –ª–µ—Ç</p>
                                <p><strong>–ê–¥—Ä–µ—Å:</strong> ${circle.Address || '–ù–µ —É–∫–∞–∑–∞–Ω'}</p>
                            </div>
                            
                            <div class="place-features">
                                <span class="feature-tag">–ì—Ä—É–ø–ø—ã –¥–æ 8 —á–µ–ª–æ–≤–µ–∫</span>
                                <span class="feature-tag">–ü—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫</span>
                                <span class="feature-tag">–°–µ—Ä—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ–¥–∞–≥–æ–≥–∏</span>
                            </div>
                            
                            <div class="place-actions">
                                <button class="btn-primary" onclick="openCircleDetail('${circle.id}', '${circle.Name}')">
                                    –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
                                </button>
                                <button class="btn-secondary" onclick="showCircleDetails('${circle.id}')">
                                    –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                                </button>
                            </div>
                        </div>
                        
                        <div class="place-price">
                            <div class="price-from">–æ—Ç</div>
                            <div class="price-amount">${circle.price.toLocaleString()} ‚ÇΩ</div>
                            <div class="price-period">–≤ –º–µ—Å—è—Ü</div>
                        </div>
                    </div>
                `;
                
                resultsList.appendChild(card);
            });
        }

        // –û—Ç–∫—Ä—ã—Ç–∏–µ —Ñ–æ—Ä–º—ã –∑–∞–ø–∏—Å–∏
        function openCircleDetail(circleId, circleName) {
            window.open(`${TALLY_FORM_URL}?circle=${encodeURIComponent(circleName)}`, '_blank');
        }

        function showCircleDetails(circleId) {
            alert('–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫—Ä—É–∂–∫–µ');
        }

        // –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            ymaps.ready(initMap);
            allCircles = await loadCirclesFromAirtable();
            displayCircles(allCircles);
        });

        // –ü–æ–∏—Å–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ Enter
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') performSearch();
        });
    </script>
</body>
</html>

